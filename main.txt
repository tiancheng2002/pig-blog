<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小朱的博客</title>
    <!-- CSS -->
    <link rel="shortcut icon" href="https://pic.imgdb.cn/item/61c3077b2ab3f51d91280376.png">
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link th:href="@{/blog/css/main.css}" rel="stylesheet" type="text/css">
    <script th:src="@{https://cdn.bootcdn.net/ajax/libs/jquery/1.8.3/jquery.min.js}" type="text/javascript"></script>
    <script th:src="@{https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/semantic.min.js}" type="text/javascript"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>

    <div th:replace="~{blog/comm/head::siderbar}"></div>

    <div id="page">
        <div th:replace="~{blog/comm/head::header}">
            <!-- 引入文件代码 -->
        </div>
        <header id="page_header" class="animate__animated animate__fadeInDown">
            <div id="header_main">
                <div>
                    <p id="main_title">小朱的博客</p>
                    <p id="main_smallcontext">没有失败，只有暂时停止的成功！</p>
                </div>
            </div>
            <div id="down">
                <i id="down_img" class="huge angle down icon"></i>
            </div>
        </header>
        <main id="context" class="animate__animated animate__fadeIn">
            <div>
                <div id="context_left">
                    <div id="blog_group" v-for="(item,index) in blogs" :key="index">
                        <div id="blog_head_classify"><p id="label" class="ui blue label">{{item.classify.labelName}}</p></div>
                        <div>
                            <a :href="'/blog/detail/'+item.bid">
                                <img :src="item.img">
                            </a>
                        </div>
                        <div id="blog_information">
                            <div id="blog_title" style="text-align: center;"><a :href="'/blog/detail/'+item.bid" style="color: rgb(39, 80, 116)">{{item.title}}</a></div>
                            <div style="text-align: center;"><span>发布日期：{{item.createDate}}&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;更新日期：{{item.updateDate}}&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;作者：{{item.author}}</span></div>
                            <p></p><span style="line-height: 25px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{item.description}}</span></p>
                            <div id="blog_classify"><p id="label" class="ui blue label">{{item.classify.labelName}}</p></div>
                        </div>
                    </div>
                    <div id="pageNum" th:if="${blogPage.pages!=0}">
                        <a th:if="${blogPage.pageNum!=1}" th:href="@{'/'+${navbar}+'?pageNum='+${blogPage.prePage}}"><i class="angle double left icon"></i></a>
                        <a th:class="${blogPage.pageNum==i?'pageNum-item-hover':'pageNum-item'}" th:href="@{'/'+${navbar}+'?pageNum='+${i}}" th:each="i:${#numbers.sequence(1,blogPage.pages)}">[[${i}]]</a>
                        <a th:if="${blogPage.isLastPage!=true}" th:href="@{'/'+${navbar}+'?pageNum='+${blogPage.nextPage}}"><i class="angle double right icon"></i></a>
                    </div>
                </div>
                <div id="context_right">
                    <div id="mine">
                        <a th:href="@{/}"><img id="mine_touxiang" src="https://pic.imgdb.cn/item/617bee902ab3f51d913ad0e3.jpg"></a>
                        <p id="mine_name">小朱</p>
                        <p id="mine_geyan">成功没有捷径，就是不断努力</p>
                        <div id="mine_information">
                            <el-button>你好</el-button>
                            <div>
                                <a style="color: black" th:href="@{/}">文章<p th:text="${blogCount}"></p></a>
                            </div>
                            <div>
                                <a style="color: black" th:href="@{/daily}">日常<p th:text="${dailyCount}"></p></a>
                            </div>
                            <div>
                                <a style="color: black" th:href="@{/classify}">分类<p th:text="${classifyCount}"></p></a>
                            </div>
                        </div>
                        <div style="display: flex;justify-content:space-evenly;">
                            <a style="background-color: #49b1f5 !important;" href="https://github.com/tiancheng2002" class="ui circular icon button"><i style="color: white !important;font-size: 18px;" class="github icon"></i></a>
                            <a style="background-color: #49b1f5 !important;" class="ui wechat circular icon button"><i style="color: white!important;font-size: 16px" class="envelope outline icon"></i></a>
                            <a style="background-color: #49b1f5 !important;" class="ui qq circular icon button"><i class="qq icon" style="color: white !important;"></i></a>
                        </div>
                        <div class="ui wechat-qr flowing popup transition hidden">
                            1849530179@qq.com
                        </div>
                        <div class="ui qq-qr flowing popup transition hidden">
                            <img class="ui rounded image" src="https://pic.imgdb.cn/item/61c82b632ab3f51d91bafca0.jpg" style="width: 100px;">
                        </div>
                    </div>
                    <div id="new_blog" style="padding: 0.5rem 1rem 0.5rem 0.5rem">
                        <div class="progress_text"><svg xmlns="http://www.w3.org/2000/svg" id="xing" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>今天已经过去<span class="progress_text-time">[[${#dates.hour(new java.util.Date())}]]</span>小时</div>
                        <div id="progress">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" th:style="'width: '+${#numbers.formatPercent((#dates.hour(new java.util.Date())/24.0),1,0)}" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div id="text">
                                [[${#numbers.formatPercent((#dates.hour(new java.util.Date())/24.0),1,0)}]]
                            </div>
                        </div>
                        <div class="progress_text"><svg xmlns="http://www.w3.org/2000/svg" id="xing" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>本周已经过去<span class="progress_text-time">[[${#dates.dayOfWeek(new java.util.Date())-1==0?7:#dates.dayOfWeek(new java.util.Date())-1}]]</span>天</div>
                        <div id="progress">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar" th:style="'width: '+${#numbers.formatPercent(((#dates.dayOfWeek(new java.util.Date())-1==0?7:#dates.dayOfWeek(new java.util.Date())-1)/7.0),1,0)}" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div id="text">
                                [[${#numbers.formatPercent(((#dates.dayOfWeek(new java.util.Date())-1==0?7:#dates.dayOfWeek(new java.util.Date())-1)/7.0),1,0)}]]
                            </div>
                        </div>
                        <div class="progress_text"><svg xmlns="http://www.w3.org/2000/svg" id="xing" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>本月已经过去<span class="progress_text-time">[[${#dates.day(new java.util.Date())}]]</span>天</div>
                        <div id="progress">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-warning progress-bar-animated" role="progressbar" th:style="'width: '+${#numbers.formatPercent((#dates.day(new java.util.Date())/maxDay),1,0)}" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div id="text">
                                [[${#numbers.formatPercent((#dates.day(new java.util.Date())/maxDay),1,0)}]]
                            </div>
                        </div>
                        <div class="progress_text"><svg xmlns="http://www.w3.org/2000/svg" id="xing" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                            <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                        </svg>今年已经过去<span class="progress_text-time">[[${#dates.month(new java.util.Date())}]]</span>个月</div>
                        <div id="progress">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-danger progress-bar-animated" role="progressbar" th:style="'width: '+${#numbers.formatPercent((#dates.month(new java.util.Date())/12.0),1,0)}" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div id="text">
                                [[${#numbers.formatPercent((#dates.month(new java.util.Date())/12.0),1,0)}]]
                            </div>
                        </div>
                    </div>
                    <div id="new_blog">
                        <div id="title_item">
                            <span><i class="paper plane icon"></i>最新文章</span>
                        </div>
                        <div th:each="blog:${newBlog}">
                            <hr>
                            <div id="new_blog-item">
                                <a th:href="@{'/blog/detail/'+${blog.bid}}">
                                    <img th:src="${blog.img}">
                                </a>
                                <div>
                                    <div>
                                        <p><a style="color: #4c4948" th:href="@{'/blog/detail/'+${blog.bid}}" th:title="${blog.title}">[[${#strings.length(blog.title)>12?#strings.substring(blog.title,0,11)+'...':blog.title}]]</a></p>
                                        <p th:text="${#dates.format(blog.createDate,'yyyy/MM/dd')}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="top_blog">
                        <div id="title_item">
                            <span><i class="fire icon"></i>top5</span>
                        </div>
                        <div th:each="blog:${blogVisited}">
                            <hr>
                            <div id="new_blog-item">
                                <a th:href="@{'/blog/detail/'+${blog.bid}}">
                                    <img th:src="${blog.img}">
                                </a>
                                <div>
                                    <div>
                                        <p><a style="color: #4c4948" th:href="@{'/blog/detail/'+${blog.bid}}" th:title="${blog.title}">[[${#strings.length(blog.title)>12?#strings.substring(blog.title,0,11)+'...':blog.title}]]</a></p>
                                        <p th:text="${#dates.format(blog.createDate,'yyyy/MM/dd')}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div id="new_comments">
                        <div id="title_item">
                            <span><i class="star outline icon"></i>最近评论</span>
                        </div>
                        <div th:each="comment:${comment}">
                            <hr>
                            <div id="new_blog-item">
                                <a th:href="@{/comment}">
                                    <img th:src="${comment.headPicture}">
                                </a>
                                <div>
                                    <div>
                                        <p><a style="color: #4c4948" th:href="@{/comment}">[[${#strings.length(comment.message)>9?#strings.substring(comment.message,0,9)+'...':comment.message}]]</a></p>
                                        <p>[[${#strings.length(comment.name)>15?#strings.substring(comment.name,0,15)+'...':comment.name}]]&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;[[${(new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000==0?'今天':((new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000)>365?(new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000/365+'年前':((new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000)>31?(new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000/31+'个月前':(new java.util.Date().getTime()-comment.commentDate.getTime())/24/60/60/1000+'天前'}]]</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="website_infomation">
                        <div id="title_item" style="margin-bottom: 1rem">
                            <span><i class="compass icon"></i>网站信息</span>
                        </div>
                        <div id="website_count">
                            <p>文章总数：<span th:text="${blogCount}"></span></p>
                            <p>运行时间：<span>[[${(new java.util.Date().getTime()-new java.text.SimpleDateFormat("yyyy-MM-dd").parse("2022-01-01").getTime())/24/60/60/1000}]]天</span></p>
                            <p>总访客量：<span>[[${people}]]</span></p>
                            <p>最近文章更新时间：<span>[[${(new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000==0?'今天':((new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000)>365?(new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000/365+'年前':((new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000)>31?(new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000/31+'个月前':(new java.util.Date().getTime()-newBlog[0].createDate.getTime())/24/60/60/1000+'天前'}]]</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer id="foot">
            <div th:replace="~{blog/comm/foot::footer}"></div>
        <!-- 引入尾部文件代码 -->
        </footer>
    </div>

    <script th:src="@{/blog/js/main.js}"></script>
    <script>

        $('.wechat').popup({
            popup : $('.wechat-qr'),
            on : 'hover',
            position: 'bottom center'
        });
        $('.qq').popup({
            popup : $('.qq-qr'),
            on : 'hover',
            position: 'bottom center'
        });
    </script>
</body>
</html>

<script>

    new Vue({
        el: '#page',
        data: function() {
            return{
                blogs:[],
                name:["a","b","c"]
            }
        },
        methods:{
            getData(){
                // $.ajax({
                //     url:'/myTest',
                //     method:'get',
                //     success:function (res) {
                //         console.log(res)
                //     }
                // })
                var that = this
                axios.get('/myTest').then(function (res) {
                    that.blogs = res.data
                })
            }
        },
        created(){
            this.getData()
        }
    })


</script>
